@page "/partners/add"
@using BlazorWebAppAdmin.Services
@inject IPartnerService PartnerService
@inject NavigationManager NavigationManager


<DashboardHeader Title="Dashboard"
                 BreadcrumbMain="Partner"
                 BreadcrumbCurrent="Add" />

<div class="container-fluid">
    <!--begin::Row-->
    <div class="row">
        <div class="col-sm-6"><h3 class="mb-0">Dashboard</h3></div>
        <div class="col-sm-6">
            <ol class="breadcrumb float-sm-end">
                <li class="breadcrumb-item"><a href="#">Partner</a></li>
                <li class="breadcrumb-item active" aria-current="page">Add</li>
            </ol>
        </div>
    </div>
    <!--end::Row-->
</div>
<div class="container-fluid">
    <!--begin::Row-->
    <div class="row g-4">
        <!--begin::Col-->
        <div class="col-12">

            <!--begin::Different Height-->
            <div class="card card-secondary card-outline mb-4">
                <!--begin::Header-->
                <div class="card-header"><div class="card-title">Add Partner</div></div>
                <!--end::Header-->
                <!--begin::Body-->
                <div class="card-body">
                    <EditForm Model="@partner" OnValidSubmit="HandleValidSubmit">
                        <div class="invalid-feedback">
                            <DataAnnotationsValidator />
                            <ValidationSummary />
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-xs-12">
                                    <label class="form-label">Tên đối tác</label>
                                    <InputText class="form-control" @bind-Value="partner.Name" />
                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.Name)" />
                                </div>
                            </div>
                            <div class="col-md-4 col-xs-12">
                                    <label class="form-label">Email</label>
                                    <InputText class="form-control" @bind-Value="partner.Email" />
                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.Email)" />
                                </div>
                            </div>
                            <div class="col-md-4 col-xs-12">
                                <label class="form-label">Phone</label>

                                <InputText class="form-control" @bind-Value="partner.Phone" />

                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.Phone)" />
                                </div>
                            </div>
                            <div class="col-md-4 col-xs-12">
                                <label class="form-label">Contact Info</label>

                                <InputText class="form-control" @bind-Value="partner.ContactInfo" />

                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.ContactInfo)" />
                                </div>
                            </div>


                            <div class="col-md-12 col-xs-12">

                                    <label class="form-label">Address</label>
                                    <InputText class="form-control" @bind-Value="partner.Address" />
                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.Address)" />
                                </div>
                            </div>
                         
                            <div class="col-md-4 col-xs-12">
                                <label class="form-label">Website</label>
                                <div class="invalid-feedback">
                                <InputText class="form-control" @bind-Value="partner.Website" />
                                </div>
                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.Website)" />
                                </div>
                            </div>


                            <div class="col-md-4 col-xs-12">
                                <label class="form-label">Tax Code</label>
                                <div class="invalid-feedback">
                            <InputText class="form-control" @bind-Value="partner.TaxCode" />
                                </div>
                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.TaxCode)" />
                                </div>
                        </div>


                            <div class="col-md-4 col-xs-12">
                                <label class="form-label">Account Number</label>
                                <div class="invalid-feedback">
                            <InputText class="form-control" @bind-Value="partner.AccountNumber" />
                                </div>
                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.AccountNumber)" />
                                </div>
                        </div>

                            <div class="col-md-4 col-xs-12">
                                <label class="form-label">Bank</label>
                                <div class="invalid-feedback">
                            <InputText class="form-control" @bind-Value="partner.BankName" />
                            </div>
                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.BankName)" />
                                </div>
                        </div>


                            <div class="col-md-4 col-xs-12">
                                <label class="form-label">Status</label>
                            <InputSelect class="form-select" @bind-Value="partner.Status">
                                <option value="@PartnerStatusConstant.Active">Active</option>
                                <option value="@PartnerStatusConstant.Inactive">Inactive</option>
                                <option value="@PartnerStatusConstant.Suspended">Suspended</option>
                            </InputSelect>
                                <div class="invalid-feedback">
                                    <ValidationMessage For="@(() => partner.Status)" />
                                </div>
                        </div>
                        </div>
                        <button class="btn btn-success  ms-2 float-end" type="submit">Save</button>
                        <button class="btn btn-secondary ms-2 float-end" @onclick="Cancel">Cancel</button>
                    </EditForm>

                </div>
                <!--end::Body-->
            </div>
            <!--end::Different Height-->


            </div>
           
        </div>
        <!--end::Col-->

    </div>
    <!--end::Row-->





@code {
    private PartnerViewModel partner = new();
    // partner ??= new PartnerViewModel();
    // if (string.IsNullOrEmpty(partner.Status))
    // {
    //     partner.Status = PartnerStatusConstant.Active;
    // }
  
    protected override void OnInitialized()
    {
        partner ??= new PartnerViewModel();
        if (string.IsNullOrEmpty(partner.Status))
        {
            partner.Status = PartnerStatusConstant.Active;
        }
    }
    private async Task HandleValidSubmit()
    {
        await PartnerService.AddAsync(partner);
        NavigationManager.NavigateTo("/partners");
    }

    private void Cancel()
    {
        NavigationManager.NavigateTo("/partners");
    }
}
 